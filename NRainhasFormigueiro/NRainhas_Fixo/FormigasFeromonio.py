from FormigasSolucao import *


class FormigasFeromonio:

    def __init__(self, evaporacao):
        self.P = evaporacao/100
        self.dimensao = 40
        self.Matriz = [
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
            [
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100],
                [100], [100], [100], [100], [100], [100], [100], [100], [100], [100]
            ],
        ]

    def __atualizacao__(self, formigueiro): # Devendo obsoleto
        self.__evaporacao__()
        self.__deposito__(formigueiro)

    def __evaporacao__(self):
        for i in self.Matriz:
            i = [round(x * (1 - self.P), 6) for x in i]

    '''def __evaporacao__(self):
        for i in range(self.dimensao):
            for j in range(self.dimensao):
                self.Matriz[i][j] *= (1 - self.P)'''

    def __deposito__(self,  caminho, formiga=None):
        for i in range(len(caminho)):  # número de formigas
            # adição
            # para cada coluna, captura a linha armazenada no caminho da formiga para adicionar o feromônio padrão
            # o Lk poderia ser uma heurística de peças se atacando em vez da dimensão
            # Primeiro a linha e segundo a coluna
            # formiga.Q/dimensao
            self.Matriz[caminho[i]][i] += 10/40 # Custo em distância
            # Custo alternativo baseado em custo de peças atacando

    '''def __deposito__(self, formigueiro):
        for i in range(formigueiro.k):  # número de formigas
            for j in range(self.dimensao):  # n
                # adição
                # para cada coluna, captura a linha armazenada no caminho da formiga para adicionar o feromônio padrão
                # o Lk poderia ser uma heurística de peças se atacando em vez da dimensão
                try:
                    # Custo mais fiel
                    self.Matriz[formigueiro.formigueiro[i].caminho[j]][j] += \
                        (formigueiro.formigueiro[i].Q / CalculaCustoCaminho(formigueiro.formigueiro[i]))
                    # Custo mais rápido
                    self.Matriz[ formigueiro.formigueiro[i].caminho[j] ][j] +=\
                                                (formigueiro.formigueiro[i].Q/self.dimensao)

                except:
                    print("Uma solução em potencial foi encontrada\n")
                    FormigasSolucao(formigueiro.formigueiro[i].caminho)'''
